$(document).ready(function(){
    $(".button-collapse").sideNav();
    $('select').material_select();
    $('.modal-trigger').leanModal();
    
    //Hightlight menu item
    $('.nav-wrapper a[href="'+location.pathname+'"]').addClass('active');  
    
    $("#search-type").change(function(){
        switch($("#search-type").val()){
            case '0' : case '1':
                $("#state-type").removeClass("hidden");
                break;
            case '2':
                $("#appart-only").removeClass("hidden");
                if($("#deposit-googleMap").attr("data-maps-loaded") == "false"){
                    initializeMaps();
                    $("#deposit-googleMap").attr("data-maps-loaded", "true");
                }
                break;
            default:
                $("#state-type").addClass("hidden");
                $("#appart-only").addClass("hidden");
        }
    });
    
    $("#search_form").submit(function(){
        if($("#min_price").val() > $("#max_price").val() || $("#max_price").val() > $("#min_price").val()){
            return false;
        }
    });
    
    $("#deposit-sales-bde").click(function(){
        if(!$("#deposit-sales-pap").hasClass("unselected")){
            $(this).toggleClass("unselected")
        }
    });
    
    $("#deposit-sales-pap").click(function(){
        if(!$("#deposit-sales-bde").hasClass("unselected")){
            $(this).toggleClass("unselected")
        }
    });
    
    $("#search-type").change(function(){
        switch($("#search-type").val()){
            case '0' : case '1':
                $("#state-type").removeClass("hidden");
                break;
            case '2':
                $("#appart-only").removeClass("hidden");
                break;
            default:
                $("#state-type").addClass("hidden");
                $("#appart-only").addClass("hidden");
        }
    });
    
    /*Deposer une annonce - Maps*/
    function initializeMaps() {
      var mapProp = {
        center:new google.maps.LatLng(51.508742,-0.120850),
        zoom:5,
        mapTypeId:google.maps.MapTypeId.ROADMAP
      };
      var map=new 
      google.maps.Map(document.getElementById("deposit-googleMap"),mapProp);
    }
    
    /*Passe l'id au formulaire de notation*/
    $("#messages .modal-trigger").click(function(){
        $("#note-hidden").attr("value", $(this).data("id"));
    });
    
    /*Formulaire de notation*/
    $("#note-range span").click(function(){
        $("#note-range span").slice(0, $(this).attr("data-note")).html("&#9733;");
        
        $("#note-range span").slice($(this).attr("data-note"), $("#note-range span").size()).html("&#9734;");
        
        $("#note-hidden").attr("value", $(this).attr("data-note"));
    });   
});